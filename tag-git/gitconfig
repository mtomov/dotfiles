[format]
  pretty = %C(red)%H%n%C(green)%an, %cr%n%n%C(magenta)%s%n%b%n

[pull]
  default = current
	rebase = false
[push]
  default = current
[core]
  editor = cursor --wait
  excludesfile = ~/.gitignore
  pager = less -FRX
[color]
  ui = auto
[alias]
  aa = add --all
  ap = add --patch
  c = commit --verbose
  ca = commit --amend --no-edit
  ci = commit -v
  co = checkout
  co-b = "!sh -c 'if [ \"$1\" = \"-b\" ]; then branch_name=$(echo \"$2\" | tr \"[:upper:]\" \"[:lower:]\" | sed \"s/[^a-z0-9]/-/g\" | sed \"s/--*/-/g\" | sed \"s/^-\\|-$//g\"); git checkout -b \"$branch_name\"; else branch_name=$(echo \"$1\" | tr \"[:upper:]\" \"[:lower:]\" | sed \"s/[^a-z0-9]/-/g\" | sed \"s/--*/-/g\" | sed \"s/^-\\|-$//g\"); git checkout \"$branch_name\"; fi' -"
  r = rebase -i origin/main
  rb = !git fetch && git rebase origin/main
  cp = cherry-pick
  br = branch
  cpcont = cherry-pick --continue
  oldify-branches = "!f() { \
    for branch in $(git for-each-ref --format='%(refname:short) %(committerdate:iso8601)' refs/heads | \
      awk -v date=\"$(date -v-2m +%Y-%m-%d)\" '$2 < date {print $1}' | grep -v '^old/'); do \
      git branch -m \"$branch\" \"old/$branch\"; \
    done; \
  }; f"
  cont = rebase --continue
  co-pr = !sh -c 'git fetch origin pull/$1/head:pr/$1 && git checkout pr/$1' -
  pr = !gh pull-request
  st = stash
  up = !git fetch && git rebase origin/main
  to-staging = !git co staging && git merge - -Xtheirs && git checkout -
  to-staging-and-deploy = !git co staging && git merge - -Xtheirs && git push && git checkout - && bundle exec cap staging deploy
  slog = log --no-merges --pretty=format:\"%h  %Cblue%<(15)%an%Creset %Cgreen%s%Creset\"
  l = log origin/main.. --reverse --format="%B%n---%n"
	cleanup = !git-cleanup
	cb = rev-parse --abbrev-ref HEAD # Print the current branch name
  spike = "!git checkout -b $(git cb)-spike; git checkout -"
  origin-head = !git symbolic-ref refs/remotes/origin/HEAD | cut -d'/' -f4
  # up = !git pull origin $(git origin-head) --rebase
  next = !git add . && git rebase --continue
  # The advantage of --force-with-lease over --force is that it won't push if
  # you haven't already seen the ref you're overwriting. It avoids the race
  # condition of accidentally "push -f"ing over a commit you haven't seen.
  pf = push --force-with-lease --set-upstream
[fetch]
  prune = true
[commit]
  # template = ~/.gitmessage
  verbose = true
[grep]
  # http://travisjeffery.com/b/2012/02/search-a-git-repo-like-a-ninja/
  extendRegexp = true
  lineNumber = true
[fetch]
  prune = true

[gui]
	tabsize = 2
	fontui = -family \"Avenir Next\" -size 14 -weight normal -slant roman -underline 0 -overstrike 0
	fontdiff = -family Menlo -size 14 -weight normal -slant roman -underline 0 -overstrike 0
	maxrecentrepo = 5
	gcwarning = false
[merge]
  tool = cursor
[mergetool "cursor"]
  cmd = cursor --wait --merge $REMOTE $LOCAL $BASE $MERGED
[diff]
  tool = cursor
[difftool "vscursor"]
  cmd = cursor -n --wait --diff $LOCAL $REMOTE
[pager]
	branch = false
[submodule]
	recurse = true
[rebase]
	autoStash = true
[init]
  templatedir = ~/.git-template
  defaultBranch = main
[include]
  path = ~/.gitconfig.local
[branch]
  sort = -committerdate
[credential "https://github.com"]
	helper =
	helper = !gh auth git-credential
[credential "https://gist.github.com"]
	helper =
	helper = !gh auth git-credential
[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true
